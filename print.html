<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The Book of Masonry</title>
                <meta name="robots" content="noindex" />
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="favicon.svg">
                        <link rel="shortcut icon" href="favicon.png">
                <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
                <link rel="stylesheet" href="css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Introduction</a></li><li class="chapter-item expanded "><a href="getting_started/index.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="getting_started/installation.html"><strong aria-hidden="true">1.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="getting_started/preparation.html"><strong aria-hidden="true">1.2.</strong> Preparation</a></li><li class="chapter-item expanded "><a href="getting_started/compilation.html"><strong aria-hidden="true">1.3.</strong> Compilation</a></li><li class="chapter-item expanded "><a href="getting_started/assets.html"><strong aria-hidden="true">1.4.</strong> Asset Management</a></li><li class="chapter-item expanded "><a href="getting_started/dependencies.html"><strong aria-hidden="true">1.5.</strong> Dependencies</a></li><li class="chapter-item expanded "><a href="getting_started/packaging.html"><strong aria-hidden="true">1.6.</strong> Packaging</a></li></ol></li><li class="chapter-item expanded "><a href="conversion.html"><strong aria-hidden="true">2.</strong> Converting Deli Mods</a></li><li class="chapter-item expanded "><a href="problems.html"><strong aria-hidden="true">3.</strong> Problem System</a></li><li class="chapter-item expanded "><a href="metadata/index.html"><strong aria-hidden="true">4.</strong> Metadata</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="metadata/dependencies.html"><strong aria-hidden="true">4.1.</strong> Dependencies</a></li><li class="chapter-item expanded "><a href="metadata/incompatibilities.html"><strong aria-hidden="true">4.2.</strong> Incompatibilities</a></li><li class="chapter-item expanded "><a href="metadata/processes.html"><strong aria-hidden="true">4.3.</strong> Processes</a></li></ol></li><li class="chapter-item expanded "><a href="assets/index.html"><strong aria-hidden="true">5.</strong> Asset Management</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="assets/setup.html"><strong aria-hidden="true">5.1.</strong> The Setup Stage</a></li><li class="chapter-item expanded "><a href="assets/runtime/index.html"><strong aria-hidden="true">5.2.</strong> The Runtime Stage</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="assets/runtime/sequentiality.html"><strong aria-hidden="true">5.2.1.</strong> Sequentiality</a></li><li class="chapter-item expanded "><a href="assets/runtime/nested_pipelines.html"><strong aria-hidden="true">5.2.2.</strong> Nested Pipelines</a></li></ol></li><li class="chapter-item expanded "><a href="assets/globbing.html"><strong aria-hidden="true">5.3.</strong> Globbing</a></li></ol></li><li class="chapter-item expanded "><a href="standalone/index.html"><strong aria-hidden="true">6.</strong> Standalone</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="standalone/installation.html"><strong aria-hidden="true">6.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="standalone/usage/index.html"><strong aria-hidden="true">6.2.</strong> Usage</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="standalone/usage/command_line.html"><strong aria-hidden="true">6.2.1.</strong> Command Line</a></li><li class="chapter-item expanded "><a href="standalone/usage/visual_studio_code.html"><strong aria-hidden="true">6.2.2.</strong> Visual Studio: Code</a></li></ol></li><li class="chapter-item expanded "><a href="standalone/features.html"><strong aria-hidden="true">6.3.</strong> Features</a></li></ol></li><li class="chapter-item expanded "><a href="git/index.html"><strong aria-hidden="true">7.</strong> Version Control with Git</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="git/continuous_integration.html"><strong aria-hidden="true">7.1.</strong> Continuous Integration</a></li></ol></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">The Book of Masonry</h1>

                    <div class="right-buttons">
                                                <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        <a href="https://github.com/H3VR-Modding/Mason.git" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                                                
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>Mason is a compiler that creates Stratum plugins from a project directory. The resulting DLL fits into the BepInEx ecosystem identically to that of a hand-written DLL; it boasts all the same features as a handwritten BepInEx plugin, such as dependencies, incompatibilities, and process name restrictions, with much less of a hassle to setup and maintain.</p>
<p>The Book of Masonry is the documentation for Mason, and intends to detail every feature in a human-readable form. Some of these features are located in the project and config files, whose schemas you can find <a href="https://github.com/H3VR-Modding/Mason/tree/main/schemas">here</a>.</p>
<p>Contributions to the book are always welcome, even ones as small as correcting a typo or simplifying a confusing sentence. You can make a suggestion directly to a contributor (such as Ash), create an issue on the repository, or click the notepad in the top right corner of the chapter to edit a file and make a pull request.</p>
<h2 id="as-a-book"><a class="header" href="#as-a-book">As A Book</a></h2>
<p>As this documentation site most closely resembles a book, a few expectations should be established.</p>
<p>Terminology used in books has been adopted. Individual web pages, such as this introduction page, are referred to as <strong>chapters</strong>. Within chapters, headings denote <strong>sections</strong>. A group of similar chapters comprises a <strong>unit</strong>. These distinctions were made to avoid confusion between &quot;section&quot; in the sense of a heading and &quot;section&quot; in the sense of a chapter.</p>
<p>To avoid repetitive content, later chapters assume you have read the former chapters. If a former chapter references content in a later chapter, it will be noted.</p>
<h2 id="disclaimers"><a class="header" href="#disclaimers">Disclaimers</a></h2>
<p>This book contains many examples of Mason project file features. To keep things concise, only relevant lines are displayed. Other information, most notably the <code>version: 1</code> at the beginning, may be required but not shown.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h1>
<p>The Getting Started unit is a pragmatic approach to learning the basics of Mason. It details, start to finish, how to create a Thunderstore package using Mason.<br />
The chapters consist of:</p>
<ul>
<li><a href="getting_started/installation.html"><strong>Installing</strong></a> Mason</li>
<li><a href="getting_started/preparation.html"><strong>Preparing</strong></a> a Mason project</li>
<li><a href="getting_started/compilation.html"><strong>Compiling</strong></a> the project into a runnable Stratum plugin</li>
<li><a href="getting_started/asset_management.html"><strong>Adding assets</strong></a> to create a noticable effect on the game</li>
<li><a href="getting_started/dependencies.html"><strong>Adding dependencies</strong></a> for required plugins</li>
<li><a href="getting_started/packaging.html"><strong>Packaging</strong></a> the final result</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<p>Before Mason can be used, it first needs to be installed.</p>
<p>Mason can be found on <a href="https://h3vr.thunderstore.io/package/Stratum/Mason/">Thunderstore</a> or <a href="https://github.com/H3VR-Modding/Mason">GitHub</a>. <strong>It is recommended and assumed that you are using r2modman or Thunderstore Mod Manager</strong>, as the Stratum ecosystem leverages the Thunderstore ecosystem extensively.<br />
It is recommended to create a new profile for the sole purpose of running Mason. This keeps start times slim and lowers the chances of a mod conflict while you are still developing your mod, but always remember to test your mod for conflicts later!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="preparation"><a class="header" href="#preparation">Preparation</a></h1>
<p>To prepare a Mason project, first navigate to where your mods are being installed. For r2modman or Thunderstore Mod Manager users, this can be found in <code>Settings &gt; Locations &gt; Browse profile folder</code>.<br />
Once you have arrived at the folder, navigate to <code>BepInEx/plugins</code> (you may have to run the game once for this folder to generate). Create a new directory, which will be the root of your Mason project. Your project path should look something like <code>BepInEx/plugins/wip-mod</code></p>
<h2 id="populating-the-project"><a class="header" href="#populating-the-project">Populating the Project</a></h2>
<p>Mason projects require some files before they can be compiled. Each of the following sections describe paths within your Mason project.</p>
<h3 id="project-file"><a class="header" href="#project-file">Project File</a></h3>
<p>The project file contains the instructions that Mason should convert into runnable code. The project file is located at <code>project.yaml</code>, and must contain</p>
<pre><code class="language-yaml">version: 1
</code></pre>
<p>at the start.</p>
<p>Wow! What an amazing project! In future examples, this will be omitted. However, <strong>it is critical that you include the version field in every project file</strong>. Failure to do so will result in the project not compiling.</p>
<h3 id="thunderstore-manifest"><a class="header" href="#thunderstore-manifest">Thunderstore Manifest</a></h3>
<p>The Thunderstore manifest contains the metadata that Thunderstore requires in every package. To avoid redundancy, Mason reads from this manifest to create metadata for your plugin. The following fields are the <strong>bare minimum</strong> to compile a Mason project, and are <strong>not representative of your final manifest</strong>:</p>
<pre><code class="language-json">{
  &quot;author&quot;: &quot;AuthorName&quot;,
  &quot;name&quot;: &quot;ModName&quot;,
  &quot;version_number&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;This does something awesome, I only have 250 characters to explain!&quot;
}
</code></pre>
<p>The author field is not part of the Thunderstore specification, however it is greatly recommended to include it. If not present, Mason will perform the following checks:</p>
<ol>
<li>Does the project directory name have the pattern <code>AuthorName-ModName</code>?</li>
<li>Does the <code>ModName</code> of the directory match the <code>ModName</code> of the manifest?</li>
</ol>
<p>If the checks pass, it will use the <code>AuthorName</code> from the project directory.</p>
<p>The author field must be a valid Thunderstore team name (same restrictions as a package name), so an author that does not match this will cause a failure.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="compilation"><a class="header" href="#compilation">Compilation</a></h1>
<p>Compilation turns a Mason project into something runnable. We haven't added any assets yet, but that is OK. Mason can compile an empty Stratum plugin, and that's all you need to learn on this page.</p>
<h2 id="how-to-compile"><a class="header" href="#how-to-compile">How to Compile</a></h2>
<p>To compile your project, simply launch the game modded. BepInEx will trigger Mason, which will then sift through all projects and compile them. The resulting project directory should look something like:</p>
<pre><code class="language-text">MyProject
 ├── bootstrap.dll
 ├── config.yaml
 ├── manifest.json
 └── project.yaml
</code></pre>
<p>If not, something probably went wrong. Check your console/log for any errors from Mason. They may be global, thus preventing Mason from compiling any projects. They may also be specific to your project, in which case they would detail what you did wrong.</p>
<h2 id="what-each-file-is"><a class="header" href="#what-each-file-is">What Each File Is</a></h2>
<p>Mason produces two files as a result of compilation: <code>bootstrap.dll</code> and <code>config.yaml</code>. These files serve two very distinct purposes.</p>
<h3 id="bootstrapdll"><a class="header" href="#bootstrapdll"><code>bootstrap.dll</code></a></h3>
<p><code>bootstrap.dll</code>, or the bootstrap file, is the code that gets run by BepInEx. This is the living embodiment of your project, and what makes it work. The bootstrap file does not require any of the other files present in order to function.</p>
<h3 id="configyaml"><a class="header" href="#configyaml"><code>config.yaml</code></a></h3>
<p><code>config.yaml</code> is a special file intended for use by standalone Mason installations. It is detailed further in <a href="getting_started/../standalone/index.html">the standalone unit</a>, but for now it can be ignored.</p>
<h2 id="running-the-result"><a class="header" href="#running-the-result">Running the Result</a></h2>
<p>If you have no errors, the project will run itself! The bootstrap file will be naturally discovered and executed by BepInEx, resulting in the project being ran. Currently, it has no assets, so nothing is performed.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="assets"><a class="header" href="#assets">Assets</a></h1>
<p>Stratum plugins without assets, much like Thunderstore packages, are rarely useful. They're like a waterbottle without the water. They are also the most complex part of Stratum plugins.</p>
<p>This page is very YAML-heavy. If these files look alien to you, <a href="https://docs.ansible.com/ansible/latest/reference_appendices/YAMLSyntax.html">this website</a> has a good breakdown of YAML syntax. It is very similar to JSON, just more terse and packs more features.</p>
<h2 id="adding-assets"><a class="header" href="#adding-assets">Adding Assets</a></h2>
<p>First, create a <code>resources</code> folder within your project. This is where all your resources will reside.</p>
<h3 id="one-asset"><a class="header" href="#one-asset">One Asset</a></h3>
<p>Assuming we have a gun within the asset bundle <code>my_gun</code> that we would like OtherLoader to load instantly, simply place the asset bundle in the resources folder. Using this simple <code>project.yaml</code> would cause it to load:</p>
<pre><code class="language-yaml">assets:
  runtime:
    assets:
      - path: my_gun
        plugin: h3vr.otherloader
        loader: item
</code></pre>
<p>In this example, the first <code>assets</code> node declares the assets of the entire plugin. The second <code>assets</code> node narrows it down to just the assets of the runtime stage.<br />
The runtime assets node takes a sequence of assets, which is show above after the hyphen. <code>path</code> is the path to the file, relative to the resources folder. <code>plugin</code> is the BepInEx GUID of the plugin that contains the loader, and <code>loader</code> is the name of the loader. Together, these three data make a single asset.</p>
<h3 id="multiple-assets"><a class="header" href="#multiple-assets">Multiple Assets</a></h3>
<p>Say you are using OtherLoader's new on-demand loading feature. This requires two assets: one for the data asset bundle, and one for the late asset bundle. This example will use <code>my_gun</code> and <code>late_my_gun</code> correspondingly:</p>
<pre><code class="language-yaml">assets:
  runtime:
    sequential: true
    assets:
    - path: my_gun
      plugin: h3vr.otherloader
      loader: item_data
    - path: late_my_gun
      plugin: h3vr.otherloader
      loader: item_first_late
</code></pre>
<p>The most notable difference in this example is the <code>sequential</code> tag. By default, runtime assets are ran in parallel. <code>sequential: true</code> specifies that it should load in series, causing them to be loaded one at a time. If it was not specified, the late asset bundle may load before the data asset bundle!</p>
<h3 id="multiple-assets-in-distinct-stages"><a class="header" href="#multiple-assets-in-distinct-stages">Multiple Assets in Distinct Stages</a></h3>
<p>Again with OtherLoader's new on-demand loading feature: if you have multiple asset bundles for the data or late loader, you must use nested pipelines. A pipeline is just a collection of subpipelines and assets to run. In fact, the <code>runtime</code> node is actually a pipeline.<br />
The necessary project file looks slightly different, but reads approximately the same:</p>
<pre><code class="language-yaml">assets:
  runtime:
    sequential: true
    nested:
    - assets:
      - path: data/*
        plugin: h3vr.otherloader
        loader: item_data
    - assets:
      - path: late/*
        plugin: h3vr.otherloader
        loader: item_first_late
</code></pre>
<p>This project file is intended for use with such a resources folder as:</p>
<pre><code class="language-text">resources
 ├── data
 │   ├── first_gun
 │   └── second_gun
 └── late
     ├── late_first_gun
     └── late_second_gun
</code></pre>
<p>This is also the most detailed example, so it may be helpful to see it in the context of the rest of the project file. The following example is a complete project file, contrary to the warning at the beginning of the book:</p>
<pre><code class="language-yaml">version: 1
dependencies:
  hard:
    h3vr.otherloader: 1.0.0
assets:
  runtime:
    sequential: true
    nested:
    - assets:
      - path: data/*
        plugin: h3vr.otherloader
        loader: item_data
    - assets:
      - path: late/*
        plugin: h3vr.otherloader
        loader: item_first_late
</code></pre>
<hr />
<p>For further explanation of assets, see <a href="getting_started/../assets/index.html">the assets unit</a>. This page specifically discusses <a href="getting_started/../assets/runtime/index.html">the runtime stage</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="dependencies"><a class="header" href="#dependencies">Dependencies</a></h1>
<p>While the project does run and have assets, its lack of declared depenendencies makes it vulnerable to a dependency-not-found error. Adding dependencies to your project ensures all dependencies are present and loaded before your plugin runs.</p>
<p>To add a dependency to the project, use the <code>dependency</code> mapping. Another mapping, <code>hard</code>, is needed to specify that it is an absolute requirement. Within this mapping, the globally unique identifier (GUID) of the plugin is used as the key, and the minimum version required is the value. For OtherLoader, dependencies in the project file would look like:</p>
<pre><code class="language-yaml">dependencies:
  hard:
    h3vr.otherloader: 1.0.0
</code></pre>
<p><code>h3vr.otherloader</code> because OtherLoader's BepInEx GUID is such. Most loaders will have their GUID listed in their documentation, Thunderstore page, or GitHub README.</p>
<hr />
<p>For more information on dependencies, see <a href="getting_started/../metadata/dependencies.html">their chapter</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="packaging"><a class="header" href="#packaging">Packaging</a></h1>
<p>Now that the mod is complete, it can be packaged! Be sure to run Mason before you package to ensure the bootstrap file is fully up to date with your project file and resources, and finish up any Thunderstore-required files.</p>
<p>Packaging a Stratum plugin is a little more complicated than a Deli mod, but it's just as easy. Our current project directory is as follows:</p>
<pre><code class="language-text">MyProject
 ├── resources
 │   └── my_gun
 ├── bootstrap.dll
 ├── config.yaml
 ├── icon.png
 ├── manifest.json
 ├── project.yaml
 └── README.md
</code></pre>
<p>The Thunderstore-required files must stay where they are, so we can add them like usual. Similarly, the bootstrap file is in the correct location for the package.<br />
The config and project files can be ignored, as they are only used to generate the bootstrap file. They may also be included in the package, but serve no meaningful purpose.<br />
This leaves only the resources folder. Because we require the resources folder to not be flattened, we must follow <a href="https://github.com/ebkr/r2modmanPlus/wiki/Structuring-your-Thunderstore-package">r2modman's style</a> of packaging and place the resources folder within a <code>plugin</code> folder.</p>
<p>With all of these factors considered, the following should be what your mod structure looks like:</p>
<pre><code class="language-text">MyMod
 ├── plugins
 │   └── resources
 │       └── my_gun
 ├── bootstrap.dll
 ├── icon.png
 ├── manifest.json
 └── README.md
</code></pre>
<p>Zip the contents of the folder and it's ready to upload!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="converting-deli-mods"><a class="header" href="#converting-deli-mods">Converting Deli Mods</a></h1>
<p>As Mason + Stratum is the replacement for Deli, creators should convert their Deli mods to Stratum plugins when they find it is possible. Conversion is performed automatically through Deliter (<code>/dɪˈliːtər/</code>), which converts all Deli mods possible within the current profile. Mods may be converted by hand, but Deliter is faster.</p>
<h2 id="installing-deliter"><a class="header" href="#installing-deliter">Installing Deliter</a></h2>
<p>Deliter can be be found on <a href="https://h3vr.thunderstore.io/package/Stratum/Deliter/">Thunderstore</a> or <a href="https://github.com/H3VR-Modding/Deliter/releases/latest">GitHub</a>.</p>
<h2 id="converting"><a class="header" href="#converting">Converting</a></h2>
<p>Install all the mods you wish to convert, then launch the game. Deliter will convert all it can to Stratum plugins, even if it cannot convert the entire mod. Once the preloader finishes, it is done.<br />
The directory of a delited mod should look similar to:</p>
<pre><code class="language-text">SomeMod
 ├── resources
 ├── AMod.deli.bak
 ├── bootstrap.dll
 ├── config.yaml
 ├── icon.png
 ├── manifest.json
 ├── project.yaml
 └── README.md
</code></pre>
<p><code>AMod.deli.bak</code> is just a copy of the original mod file, in case the original mod is not available on Thunderstore for whatever reason.<br />
The original file, in this example <code>AMod.deli</code>, may actually still exist under some circumstances. This happens when a mod cannot be fully converted, but is instead partially or not at all converted. To check if the mod was converted at all, simply view if there are any assets in the project file. No assets means no conversion. In these scenarios, mods still require Deli.</p>
<h2 id="repackaging"><a class="header" href="#repackaging">Repackaging</a></h2>
<p>As Deliter simply generates a Mason project, the steps listed on <a href="getting_started/packaging.html">the packaging page of Getting Started</a> can be followed with a few additions.</p>
<p>The most important thing to do when repackaging a delited mod is: <strong>do not include the <code>.bak</code> file</strong>. This is the original Deli mod, which is already on Thunderstore within an older package version. It serves no functional purpose and can be omitted.</p>
<p>Partial conversions also need to be cared for more than complete conversions. You <em>can</em> package the partially converted Deli mod with no edits, but that could as much as double the size of the package.<br />
If possible, skim through the manifest file of the Deli mod and check what files/folders are still used. Deliter is not smart enough to delete them, so you must do this manually.<br />
The same goes for the resources folder; using the project file as a guide, trim any excess resources. This will result in a smaller Thunderstore package. For more advanced users, <a href="standalone/index.html">the standalone section</a> details automatic packaging which will do this process for you.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="problem-system"><a class="header" href="#problem-system">Problem System</a></h1>
<p>The problem system of Mason, which manifests itself as errors and warnings, exists to inform creators of problems that exist in their projects before they are ran. This increases the speed at which projects can be worked on, because you no longer need to wait for the game to launch before seeing if there are any problems. This system also integrates well with Visual Studio: Code, to the degree that you might not notice how it works, as discussed on <a href="../standalone/usage/visual_studio_code.html">that page</a>.</p>
<p>Consider this warning:</p>
<pre><code class="language-text">warning at manifest.json(0,0): [C10] The author of the mod was infered by the directory name. Consider adding an 'author' property.
</code></pre>
<h2 id="the-message"><a class="header" href="#the-message">The Message</a></h2>
<p>The most important element of this problem is the message:</p>
<pre><code class="language-text">The author of the mod was infered by the directory name. Consider adding an 'author' property.
</code></pre>
<p>The message is often what you will see first, and is fairly self explanatory. It explains the problem, and attempts to give instructions on how to resolve it.</p>
<h3 id="message-identifiers"><a class="header" href="#message-identifiers">Message Identifiers</a></h3>
<p>Each message format (the message before it has any specific data inserted) has its own identifier, in this case <code>C10</code>.<br />
The character indicates which component of Mason emitted the problem, and the number is the unique ID of the message format within that component of Mason. The possible components are:</p>
<ul>
<li><code>C</code>: compiler (used by patcher and standalone)</li>
<li><code>S</code>: standalone</li>
<li><code>P</code>: patcher</li>
</ul>
<h2 id="severity"><a class="header" href="#severity">Severity</a></h2>
<p>The next datum of note is the severity. If you have any experience reading logs, this should be a breeze. Mason contains only two severities: <code>warning</code> and <code>error</code>. Warnings represent a potential future flaw, or that something can be done easier. Errors represent an issue in the project that causes it to be uncompilable.</p>
<h2 id="location"><a class="header" href="#location">Location</a></h2>
<p>The last piece of information in the probem is its location. With this problem, it is <code>manifest.json(0,0)</code>. Locations come in four kinds, with each being more specific than the last:</p>
<h3 id="global"><a class="header" href="#global">Global</a></h3>
<p>Global errors are the rarest and are rarely due to the project itself. They are the every-day error of Mason, and are shown as <code>.(0,0)</code>.</p>
<h3 id="file-and-folder"><a class="header" href="#file-and-folder">File and Folder</a></h3>
<p>File/folder specific errors are due to problems with the file's presense, location, or holistic contents. They are shown as <code>path/to/item(0,0)</code>. This example is a holistic error, as there is no specific point in the file that should have the author property, but the file as a whole should contain it.</p>
<h3 id="file-range"><a class="header" href="#file-range">File Range</a></h3>
<p>File range errors are caused by a segment of text within the project. They take the form of <code>path/to/item(X1,Y1-X2,Y2)</code>, where X1 is the beginning line, Y1 is the beginning column, X2 is the ending line, and Y2 is the ending column.</p>
<h3 id="file-point"><a class="header" href="#file-point">File Point</a></h3>
<p>File point errors are mainly errors in the parsing libraries that Mason uses (code that reads JSON/YAML), which reports not ranges of text but points. They take the form of <code>path/to/item(X,Y)</code> where X is the line number and Y is the column number.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="metadata"><a class="header" href="#metadata">Metadata</a></h1>
<p>Mason makes available the rich metadata options of BepInEx plugins. Currently, the metadata available are:</p>
<ul>
<li><a href="metadata/dependencies.html"><strong>Dependencies</strong></a> upon other plugins</li>
<li><a href="metadata/incompatibilities.html"><strong>Incompatibilities</strong></a> with other plugins</li>
<li><a href="metadata/processes.html"><strong>Process</strong></a> name restrictions</li>
</ul>
<h2 id="finding-the-guid"><a class="header" href="#finding-the-guid">Finding the GUID</a></h2>
<p>Metadata that reference other plugins, such as dependencies and incompatibilities, require the GUID of other plugins. If you are not directly told the GUID of a plugin, how are you supposed to find it?</p>
<p>Plugins compiled using Mason always have a GUID with the format of <code>Author-Name</code>. This is <em>almost always</em> identical to the dependency string on Thunderstore, but without the version. For example, <code>nayr31-VeprHunter-1.0.0</code> would be <code>nayr31-VeprHunter</code>. The only instances where this is not the case is when the team name (uploader) of the package is not the same as the <code>author</code> field of the project's manifest, and is usually caused by reuploads and project forks.<br />
Consider a project, <code>MedicBag</code>, which is originally created by Dallas. Dallas uses <code>Dallas</code> as his Thunderstore team name and <code>author</code> field. The Thunderstore dependency string would be <code>Dallas-MedicBag-x.y.z</code> and the GUID would be <code>Dallas-MedicBag</code>. If <code>Hoxton</code> uploaded his edit of the project, the project would have the dependency string <code>Hoxton-MedicBag-x.y.z</code>. Given that Hoxton did not change the <code>author</code> field and recompile the project, the GUID of his mod would remain <code>Dallas-MedicBag</code>.</p>
<p>Plugins created from scratch (i.e. not using Mason) can have whatever they wish as their GUID. There are few restrictions on the format, and you will need the plugin creator to specify what the GUID is. They may provide documentation on the Thunderstore page, GitHub README, or other means.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="dependencies-1"><a class="header" href="#dependencies-1">Dependencies</a></h1>
<p>Dependencies are a metadatum that instructs BepInEx on what plugins should load before your plugin, and asserts the version of the other plugins.<br />
They come in two forms: hard and soft.</p>
<h2 id="hard-dependencies"><a class="header" href="#hard-dependencies">Hard Dependencies</a></h2>
<p>Hard dependencies are the most common form of dependency and probably what you think of when you hear the word &quot;dependency.&quot; A hard dependency requires another plugin to be present, and requires that it is at least a certain version. Given that these criteria are satisfied, your plugin will load after the other plugin. In 99% of cases (source: me), a hard dependency is what you need.</p>
<h3 id="hard-example"><a class="header" href="#hard-example">Hard Example</a></h3>
<pre><code class="language-yaml">dependencies:
  hard:
    h3vr.otherloader: 1.0.0
</code></pre>
<p>This requires that OtherLoader 1.0.0 is present, and causes it to load before our plugin.</p>
<h2 id="soft-dependencies"><a class="header" href="#soft-dependencies">Soft Dependencies</a></h2>
<p>Soft dependencies are the long lost brothers of hard dependencies. A soft dependency checks if a plugin is present, and if so, causes it to load before your plugin, but does not cause your plugin to fail if it is not present. Soft dependencies have niche use cases, so much so that I cannot think of a reason to use one in the context of Mason.</p>
<h3 id="soft-example"><a class="header" href="#soft-example">Soft Example</a></h3>
<pre><code class="language-yaml">dependencies:
  soft:
  - wristimate
</code></pre>
<p>If Wristimate is present, the plugin will load after it. I don't know why you would want to do this, but I can't think of any good examples.</p>
<h2 id="dependency-tips"><a class="header" href="#dependency-tips">Dependency Tips</a></h2>
<p>Good dependencies make a good plugin. Always <strong>depend on the the lowest possible version that has your loaders</strong>. This allows users to revert the loader plugin for whatever purpose is necessary, most notably it breaking.<br />
Also, <strong>use as few dependencies as possible</strong>. The more dependencies, the more points of breakage in a plugin.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="incompatibilities"><a class="header" href="#incompatibilities">Incompatibilities</a></h1>
<p>Incompatibilities are a metadatum much like the opposite of a hard dependency: they prevent your plugin from loading if the specified plugin is present. You may want to do this if a plugin obsoletes another plugin, and you want the user to notice and uninstall the old version.</p>
<h2 id="example"><a class="header" href="#example">Example</a></h2>
<pre><code class="language-yaml">incompatibilities:
- MyAuthor-OlderModName
</code></pre>
<p>This example prevents the plugin from loading if <code>MyAuthor-OlderModName</code> is present.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="processes"><a class="header" href="#processes">Processes</a></h1>
<p>Processes are a metadatum that only allows the plugin to be loaded in certain games/applications. <strong>You should only use this if your loaders are available for multiple games</strong>. Given that the loaders are only available for one game and you have listed the loaders as dependencies, it follows that your plugin will only ever run on that one game.</p>
<h2 id="example-1"><a class="header" href="#example-1">Example</a></h2>
<pre><code class="language-yaml">processes:
- h3vr.exe
</code></pre>
<p>This prevents the plugin from running on any game <em>except for</em> H3VR.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="asset-management"><a class="header" href="#asset-management">Asset Management</a></h1>
<p>Assets are the most important element of nearly all Mason projects. A strong understanding of assets shows a fairly good understanding of Mason.</p>
<h2 id="lexicon"><a class="header" href="#lexicon">Lexicon</a></h2>
<p>Before we continue, some definitions should be established:</p>
<p>A <strong>loader</strong> is a plugin that features some code to convert data into some effect in game. An <strong>asset</strong> is one or more <strong>resources</strong>, which are files and folders used by an asset, that are passed to a loader at a certain time. A <strong>stage</strong> is a Stratum process that executes every plugin, thus every asset.<br />
For example, OtherLoader is a loader that turns asset bundles into spawnable guns in game. VeprHunter contains an asset bundle (which has the data of the gun), which then gets passed to OtherLoader. The process of passing the asset bundle to OtherLoader is the asset, but the asset bundle itself is a resource because it is used in an asset. This entire interaction is facilitated by the runtime stage, which runs every plugin's runtime callback (thus running every plugin's runtime assets) while the game is running.</p>
<p>While assets and resources are closely related, it is important to note the difference so the contents of a project can be clearly and concisely explained.</p>
<h2 id="the-asset-definition"><a class="header" href="#the-asset-definition">The Asset Definition</a></h2>
<p>The remaining chapters of this unit cover much about assets, but not do not define them. Instead, assets an asset definition will be shown and dissected in this very section.</p>
<p>Yet another term to learn! Asset definition is simply the text within a project file that represents an asset; it is the way an asset is defined. Assets have the structure of:</p>
<pre><code class="language-yaml">path: gun_bundle
plugin: h3vr.otherloader
loader: item
</code></pre>
<p>but the properties can be reordered, of course.<br />
An asset definition can be broken into the following components:</p>
<ul>
<li><code>path</code>: the path to the resource, relative to the resources folder</li>
<li><code>plugin</code>: the BepInEx GUID of the plugin that contains the loader</li>
<li><code>loader</code>: the name of the loader</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="the-setup-stage"><a class="header" href="#the-setup-stage">The Setup Stage</a></h1>
<p>Setup assets follow the WYSIWYG principle. They have no quirks and use a format extremely similar to Deli, in which assets are placed in a sequence:</p>
<pre><code class="language-yaml">assets:
  setup:
  - path: readme.txt
    plugin: motds
    loader: init
  - path: readme confirm.txt
    plugin: motds
    loader: init
</code></pre>
<p>In this case, the <code>readme.txt</code> asset runs to completion before the <code>readme confirm.txt</code> asset begins. When the second asset finishes, the plugin's setup callback is complete.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="the-runtime-stage"><a class="header" href="#the-runtime-stage">The Runtime Stage</a></h1>
<p>The runtime stage, being that it is not as restricted as the setup stage, has significantly more features and complexity.</p>
<h2 id="starting-from-assets"><a class="header" href="#starting-from-assets">Starting from Assets</a></h2>
<p>The runtime and setup stage, although very different in abilities, both share the purpose of running assets.</p>
<p>Assuming the loaders are available for the runtime stage as well, the same asset sequence can be used with the runtime stage:</p>
<pre><code class="language-yaml">assets:
  runtime:
    assets:
    - path: readme.txt
      plugin: motds
      loader: init
    - path: readme confirm.txt
      plugin: motds
      loader: init
</code></pre>
<p>However, may produce a different result than the setup stage because of the <strong>sequentiality</strong>, which is the way the assets are executed. Setup is constrained into one sequentiality, hence it being just a list. Runtime contains two possible sequentialities, which are discussed in <a href="assets/runtime/sequentiality.html">the first chapter of this unit</a>. Runtime also contains other features, such as <a href="assets/runtime/nested_pipelines.html">nested pipelines</a>, which are possible because of sequentiality.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sequentiality"><a class="header" href="#sequentiality">Sequentiality</a></h1>
<p>Sequentiality is the way assets are executed. Using the wrong sequentiality for the job can result in bugs traditionally called <a href="https://en.wikipedia.org/wiki/Race_condition">race conditions</a>.</p>
<p>If sequentiality allows creators to screw over their own projects, why bother with the feature at all? Consider this runtime stage:</p>
<pre><code class="language-yaml">assets:
  runtime:
    assets:
    - path: guns/pistol
      plugin: h3vr.otherloader
      loader: item
    - path: guns/rifle
      plugin: h3vr.otherloader
      loader: item
    - path: guns/smg
      plugin: h3vr.otherloader
      loader: item
</code></pre>
<p>Because the default sequentiality is parallel, this runtime stage is running the assets in parallel. With parallel sequentiality, the plugin does not await assets to begin the next one. It begins <code>guns/pistol</code>, <code>guns/rifle</code>, and then <code>guns/smg</code> before any of the previous assets have completed. The assets may finish in the same order, but it is never certain. This may result in bugs if creators do not factor in parallel processing.<br />
Although it can cause problems, it pays dividends in accelerating the loading time. Each asset bundle is not dependent on any of the other asset bundles, so all asset bundles are able to load independently and thus simultaneously. These gun bundles may be massive, requiring solid chunks of time to decompress on a single thread. In series, these all compete for the same hardware resources and thus the total time to load is the sum of each individual load. When adjusted to be ran in parallel, though, the total loading time of the plugin is greatly reduced.</p>
<h2 id="overriding-sequentiality"><a class="header" href="#overriding-sequentiality">Overriding Sequentiality</a></h2>
<p>If the default, parallel sequentiality does not suit your needs, you can override it with the <code>sequential</code> property. This is especially useful for OtherLoader's on-demand loading feature:</p>
<pre><code class="language-yaml">assets:
  runtime:
    sequential: true
    assets:
    - path: pistol
      plugin: h3vr.otherloader
      loader: item_data
    - path: late_pistol
      plugin: h3vr.otherloader
      loader: item_late
</code></pre>
<p>In this example, <code>pistol</code> begins and finishes loading before <code>late_pistol</code> begins loading. This prevents the late asset bundle, which should be loaded last, from being loaded earlier. To load the other guns in parallel in the same fashion, we need <a href="assets/runtime/nested_pipelines.html">nested pipelines</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="nested-pipelines"><a class="header" href="#nested-pipelines">Nested Pipelines</a></h1>
<p>We've covered sequentiality, which allows loading individual assets before others, but what if you wish to load entire batches of assets before others? That's where you need nested pipelines.</p>
<p>Nested pipelines have the same syntax as the runtime stage. In fact, the runtime stage <em>is</em> a pipeline! Nested pipelines are just a list of pipelines that are executed before the assets, in the same fashion as the assets. For example:</p>
<pre><code class="language-yaml">assets:
  runtime:
    sequential: true
    nested:
    - assets:
      - path: rifle
        plugin: h3vr.otherloader
        loader: item_data
      - path: pistol
        plugin: h3vr.otherloader
        loader: item_data
    - assets:
      - path: late_rifle
        plugin: h3vr.otherloader
        loader: item_late
      - path: pistol
        plugin: h3vr.otherloader
        loader: item_late
</code></pre>
<p>In this example, the nested pipelines act like substages; all the assets of the first pipeline finish loading before any of the assets of the second pipeline begin.</p>
<p>Sometimes, you have many assets that can be loaded in parallel but some assets that must be loaded in series. Nested pipelines allow these two to be combined into one project:</p>
<pre><code class="language-yaml">assets:
  runtime:
    nested:
    - sequential: true
      assets:
      - path: readme.txt
        plugin: motds
        loader: init
      - path: readme confirm.txt
        plugin: motds
        loader: init
    assets:
    - path: rifle
      plugin: h3vr.otherloader
      loader: item
    - path: pistol
      plugin: h3vr.otherloader
      loader: item
</code></pre>
<p>This example begins loading both guns at the same time, as well as the nested pipeline. The nested pipeline loads both readme files, but does so one at a time.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="globbing"><a class="header" href="#globbing">Globbing</a></h1>
<p>Globbing, or the use of wildcards, is a feature you've likely used many times already. It allows multiple things, in this case files and folders, to be specified by one string. Currently, globbing is only enabled for the <code>path</code> property of an asset definition:</p>
<pre><code class="language-yaml">assets:
  runtime:
    assets:
    - path: guns/*
      plugin: h3vr.otherloader
      loader: item
</code></pre>
<p>Any time a path separator (<code>/</code>) is used, the result of the glob is filtered to only the directories of the previous glob.</p>
<h2 id="a-runtime-forewarning"><a class="header" href="#a-runtime-forewarning">A Runtime Forewarning</a></h2>
<p>Globbing can be another catalyst of runtime bugs. Consider:</p>
<pre><code class="language-yaml">assets:
  runtime:
    sequential: true
    assets:
    - path: guns/data/*
      plugin: h3vr.otherloader
      loader: item_data
    - path: guns/late/*
      plugin: h3vr.otherloader
      loader: item_late
</code></pre>
<p>This project file appears to load all data asset bundles parallel, then late asset bundles in parallel. However, all a glob does is expand; an asset definition with a glob in a list is converted into many assets in the same list. This project would load all data asset bundles and late asset bundles in series.</p>
<p>To resolve this problem, simply create a nested pipeline for each asset definition:</p>
<pre><code class="language-yaml">assets:
  runtime:
    sequential: true
    nested:
    - assets:
      - path: guns/data/*
        plugin: h3vr.otherloader
        loader: item_data
    - assets:
      - path: guns/late/*
        plugin: h3vr.otherloader
        loader: item_late
</code></pre>
<p>In this case, the globs will expand within the nested pipelines. This would load all data asset bundles in parallel, wait for all to complete, then begin to load all late asset bundles.</p>
<h2 id="glob-types"><a class="header" href="#glob-types">Glob Types</a></h2>
<p>Mason supports many globs, which may be used to your delight.</p>
<h3 id="name"><a class="header" href="#name">Name</a></h3>
<p>Name globs are globs that match files or folders within the directory, and may be composited together within one path segment (text between path separators). Literals (plain text) also fall under this category.<br />
A composite name glob may be <code>[cb]at*</code>, which would match <code>cat</code>, <code>bat</code>, <code>batmobile</code>, <code>cathode tube</code> and more, but not <code>rat</code>, <code>brat</code>, <code>latissimus</code>, and many others.</p>
<p>Some name globs do not require any data to fulfill their purpose:</p>
<table><thead><tr><th>Glob</th><th>Purpose</th></tr></thead><tbody>
<tr><td><code>*</code></td><td>Matches 0 or more characters</td></tr>
<tr><td><code>?</code></td><td>Matches exactly 1 character</td></tr>
</tbody></table>
<p>while others do:</p>
<table><thead><tr><th>Glob</th><th>Purpose</th><th>Does Match</th><th>Does Not Match</th></tr></thead><tbody>
<tr><td><code>[bc]</code></td><td>Matches any character within the brackets</td><td><code>b</code>, <code>c</code></td><td><code>a</code>, <code>d</code> .. <code>z</code>, <code>A</code> .. <code>Z</code>, <code>0</code> .. <code>9</code> and more</td></tr>
<tr><td><code>[!bc]</code></td><td>Matches any character <em>except</em> those within the brackets</td><td><code>a</code>, <code>d</code> .. <code>z</code>, <code>A</code> .. <code>Z</code>, <code>0</code> .. <code>9</code> and more</td><td><code>b</code>, <code>c</code></td></tr>
<tr><td><code>[0-5]</code></td><td>Matches any character between the two characters</td><td><code>0</code> .. <code>5</code></td><td><code>6</code> .. <code>9</code>, <code>a</code> .. <code>z</code>, <code>A</code> .. <code>Z</code> and more</td></tr>
<tr><td><code>[!0-5]</code></td><td>Matches any character <em>except</em> those between the two characters</td><td><code>6</code> .. <code>9</code>, <code>a</code> .. <code>z</code>, <code>A</code> .. <code>Z</code> and more</td><td><code>0</code> .. <code>5</code></td></tr>
</tbody></table>
<h3 id="globstar-"><a class="header" href="#globstar-">Globstar (<code>**</code>)</a></h3>
<p>Globstar matches every file and empty folder within the current folder and any subfolders, as well as the current folder itself. This is often used to glob any file within a folder with a certain name, regardless of which directory it is in. As an example, <code>gun/**/data/*</code> would match <code>gun/data/something</code>, <code>gun/blue/data/anything</code>, <code>gun/green/chartreuse/data/you name it</code></p>
<h2 id="escape-characters"><a class="header" href="#escape-characters">Escape Characters</a></h2>
<p>Globs can be escaped, causing the glob to become a literal. This can be done by putting a backslash (<code>\</code>) before the brackets. For example, <code>[brackets].txt</code> will only match <code>b.txt</code>, <code>r.txt</code>, <code>a.txt</code>, and so on, but <code>\[brackets\].txt</code> will only match the file named <code>[brackets].txt</code>.<br />
Be careful with escaping both brackets, as <code>\[brackets].txt</code> will merely prefix the glob with a backslash. Similarly, <code>[brackets\].txt</code> does not escape the glob, but adds backslash as a possible character that can be matched. As a backslash cannot be used in a file/folder name on Windows, both of the errorful globs will match nothing.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="standalone"><a class="header" href="#standalone">Standalone</a></h1>
<p>Up until this point, only the patcher plugin has been used. While the patcher plugin is very easy to begin with, it leaves much to be desired in relation to its workflow. Needing to launch the game to compile a mod, reading the console for warnings/errors, and manually packaging are possible, but tedious actions.<br />
The standalone version of Mason aims to streamline the workflow as much as possible, and is even cross-platform!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installation-1"><a class="header" href="#installation-1">Installation</a></h1>
<p>Mason can be installed as a NuGet tool or by downloading the EXE directly.</p>
<h2 id="nuget"><a class="header" href="#nuget">NuGet</a></h2>
<p>NuGet is the easiest, but is only available if you have the .NET SDK installed. If you don't know what that is, proceed to the direct download. For those with the SDK, use</p>
<pre><code class="language-bash">dotnet tool install --global mason
</code></pre>
<p>to install and</p>
<pre><code class="language-bash">dotnet tool update --global mason
</code></pre>
<p>to update.</p>
<h2 id="direct-download"><a class="header" href="#direct-download">Direct Download</a></h2>
<p>Direct download, while primitive, works without any additional programs. Visit <a href="https://github.com/H3VR-Modding/Mason/releases/latest">the latest release</a> and download the standalone zip for your OS. Extract this to a directory, then add it to your PATH (<a href="https://www.wikihow.com/Change-the-PATH-Environment-Variable-on-Windows">for Windows</a>). Adding to PATH ensures Mason can be called from anywhere on your PC.</p>
<p>To update Mason, extract a newer release to the same folder as before. Delete all items before extracting to ensure there are no unused files.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="usage"><a class="header" href="#usage">Usage</a></h1>
<p>Before calling standalone Mason, you must add a <code>config.yaml</code> file to your project directory. This file instructs Mason on where it can find the DLLs it needs, as it does not know where the game files are like the patcher plugin does. This file may appear as:</p>
<pre><code class="language-yaml">directories:
  bepinex: C:\Users\&lt;user&gt;\AppData\Roaming\Local\r2modmanPlus-local\profiles\H3VR\&lt;profile&gt;\BepInEx
  managed: C:\Program Files (x86)\Steam\steamapps\common\H3VR\h3vr_Data\Managed
</code></pre>
<p>Additionally, this BepInEx directory must have Stratum installed.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="command-line"><a class="header" href="#command-line">Command Line</a></h1>
<p>Invoking Mason from command line is as simple as invoking:</p>
<pre><code class="language-bash">mason
</code></pre>
<p>from within a project directory.</p>
<p>Mason contains a help page, which like many other shell utilities, can be accessed via a <code>--help</code> flag:</p>
<pre><code class="language-text">$ mason --help
mason 1.0.4
Copyright (C) 2021 Stratum Team

  build      Builds the mod, which outputs the plugin file.

  pack       Builds and zips the mod, which outputs the mod ready for upload to
             Thunderstore.

  help       Display more information on a specific command.

  version    Display version information.
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="visual-studio-code"><a class="header" href="#visual-studio-code">Visual Studio: Code</a></h1>
<p>Mason integrates fairly nicely with Visual Studio: Code. With the full suite of options, Code offers <code>manifest.json</code> and <code>project.yaml</code> IntelliSense (auto-completion with descriptions and examples), build and pack tasks, and errors appear directly within the text files. The necessary files can be found in <a href="https://github.com/H3VR-Modding/Mason-Quickstart/tree/main/.vscode">the quickstart repository</a>, but you might as well just download the entire repository if you choose to use the files.</p>
<p>Tasks are organized as build tasks, meaning <code>CTRL + SHIFT + B</code> (by default) prompts you with a list of options. Running one of them will either succeed, or bring focus to the problems panel. Problems will be underlined when possible in files, and <strong>Mason must be re-ran to update its reported problems</strong>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="features"><a class="header" href="#features">Features</a></h1>
<p>Standalone Mason, being that it is its own application, has some added features compared to the patcher plugin.</p>
<h2 id="automatic-packaging"><a class="header" href="#automatic-packaging">Automatic Packaging</a></h2>
<p>As covered in <a href="standalone/../getting_started/packaging.html">the Getting Started article</a>, packaging can be a bit tedious because of all the factors to consider, compared to Deli's simple &quot;zip everything in the folder&quot; doctrine. Also, it can be easy to forget to run Mason before packaging, causing you to package an old bootstrap file. Automatic packaging allows you to put in the same amount of effort as you did with Deli, but yield a more efficient result.</p>
<p>The pack command, <code>mason pack</code>, first begins compilation. When Mason compiles a project, it must enumerate through each asset definition to execute the <code>path</code> glob. Mason stores the matching files/folders in a buffer. For example, a project with this structure:</p>
<pre><code class="language-text">MyProject
 ├── resources
 │   ├── data
 │   │   ├── first_gun
 │   │   └── second_gun
 │   ├── banking info
 │   │   ├── birthday.txt
 │   │   ├── credit card.txt
 │   │   ├── mother's maiden name.txt
 │   │   └── social security number.txt
 │   └── late
 │       ├── late_first_gun
 │       └── late_second_gun
 ├── bootstrap.dll
 ├── config.yaml
 ├── icon.png
 ├── manifest.json
 ├── project.yaml
 └── README.md
</code></pre>
<p>and these assets:</p>
<pre><code class="language-yaml">assets:
  runtime:
    sequential: true
    nested:
      - assets:
        - path: data/*
          plugin: h3vr.otherloader
          loader: item_data
      - assets:
        - path: late/*
          plugin: h3vr.otherloader
          loader: item_first_late
</code></pre>
<p>will only use the following resources:</p>
<pre><code class="language-text"> .
 ├── data
 │   ├── first_gun
 │   └── second_gun
 └── late
     ├── late_first_gun
     └── late_second_gun
</code></pre>
<p>The stored paths are then used to determine which files are added to a Thunderstore package. The result of this example would be:</p>
<pre><code class="language-text"> .
 ├── plugins
 │   ├── resources
 │   │   ├── data
 │   │   │   ├── first_gun
 │   │   │   └── second_gun
 │   │   └── late
 │   │       ├── late_first_gun
 │   │       └── late_second_gun
 │   └── bootstrap.dll
 ├── icon.png
 ├── manifest.json
 └── README.md
</code></pre>
<p>As you can see, only the necessary files are packaged. It also places the resources folder within the <code>plugins</code> folder for you. All from running one command!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="version-control-with-git"><a class="header" href="#version-control-with-git">Version Control with Git</a></h1>
<p>Version control is essential to any long-lasting project. As the name implies, it manages versions of the project files. This allows an entire project to be reverted to an earlier point in time.</p>
<p>Git is by far the most popular version control system. Git may be initialized within a Mason project like any other directory. Git also has the added benefit of being easily hostable on websites such as GitHub, allowing for community collaboration and additional documentation for your mod.</p>
<p>This book will only cover Git features specific to Mason, not how to use it. There are already mountains of information on the subject that have been constructed much better than anything possible here.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="continuous-integration"><a class="header" href="#continuous-integration">Continuous Integration</a></h1>
<p>Continuous integration is a feature of many source control websites that, as the name implies, continuously integrates source code changes into the product. For the purposes of Mason, continuous integration is just automatic packaging.</p>
<h2 id="github"><a class="header" href="#github">GitHub</a></h2>
<p>Continuous integration with GitHub is simple. Simply copy <a href="https://github.com/H3VR-Modding/Mason-Quickstart/blob/main/.github/workflows/package.yml">this file</a> into your project, using the same path. GitHub will run this script every time a push or pull request is made to the <code>main</code> or <code>master</code> branches that affect the contents of a Thunderstore package, and it will yield an artifact containing the Thunderstore package. Additionally, you may add a branch protection rule to the main branch and require that the script succeeds before a pull request can be merged.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
                        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
                
    </body>
</html>
